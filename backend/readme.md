上下文的实现： 为了让 LLM 看起来有记忆，我们使用了被称为 "上下文窗口 (Context Window)" 的技术。你的后端代码是这样实现的：

步骤 1：加载历史。 你的代码查询数据库，获取该 SessionID 的所有历史对话（ChatRecord）。

步骤 2：构造消息列表。 你的代码将历史对话（用户 A → AI B，用户 C → AI D）和用户当前的新消息（用户 E）全部打包成一个完整的 messages 数组。

步骤 3：发送给 LLM。 这个包含了几轮对话历史的数组被发送给 LLM API。