# Vox 项目文档

## 项目简介
Vox 是一个基于 AI 的语音角色扮演平台，用户可以与虚拟角色进行语音互动。项目结合了语音识别 (ASR)、自然语言处理 (LLM) 和语音合成 (TTS) 技术，提供沉浸式的交互体验。

---

## 如何运行程序

### 1. 环境要求
- **操作系统**: Windows / macOS / Linux
- **开发语言**: Go (后端), TypeScript + React (前端)
- **依赖工具**:
  - Node.js (>= 16.x)
  - pnpm (>= 7.x)
  - Go (>= 1.18)
  - 数据库: MySQL

### 2. 配置环境变量
在项目根目录下创建 `.env` 文件，配置以下内容：

```
# 数据库配置
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=yourpassword
DB_NAME=vox

# 七牛云配置
QINIU_OPENAI_BASE_URL=https://openai.qiniu.com/v1
QINIU_LLM_KEY=your_qiniu_key

# JWT 配置
JWT_SECRET=your_jwt_secret
```

### 3. 启动后端服务
```bash
cd backend
# 安装依赖
go mod tidy
# 运行服务
go run main.go
```

### 4. 启动前端服务
```bash
cd frontend
# 安装依赖
pnpm install
# 运行服务
pnpm dev
```

### 5. 访问应用
在浏览器中打开 `http://localhost:5173`。

---

## 架构设计

### 系统架构
Vox 项目采用前后端分离架构，主要模块包括：

1. **前端模块**
   - 使用 React + TypeScript 构建，提供用户界面和交互逻辑。
   - 使用 TailwindCSS 进行样式管理。

2. **后端模块**
   - 使用 Go 语言开发，提供 API 服务。
   - 集成了语音识别 (ASR)、自然语言处理 (LLM) 和语音合成 (TTS) 服务。

3. **数据库模块**
   - 使用 MySQL 存储用户、角色和聊天记录。

4. **第三方服务**
   - 七牛云 API：用于语音合成和语音识别。

### 模块规格

#### 1. 前端模块
- **主要功能**:
  - 用户注册与登录
  - 角色选择与创建
  - 聊天界面与语音互动
- **技术栈**:
  - React + TypeScript
  - TailwindCSS
  - Vite 构建工具

#### 2. 后端模块
- **主要功能**:
  - 用户认证 (JWT)
  - 角色管理 (CRUD)
  - 聊天记录存储与查询
  - 调用第三方服务 (ASR, LLM, TTS)
- **技术栈**:
  - Go + Gin 框架
  - GORM (ORM 框架)

#### 3. 数据库模块
- **表结构**:
  - `users` 表：存储用户信息
  - `characters` 表：存储角色信息，包括音色 ID
  - `chat_records` 表：存储用户与角色的聊天记录

#### 4. 第三方服务
- **七牛云 API**:
  - `/voice/asr`：语音转文本
  - `/voice/tts`：文本转语音
  - `/voice/list`：获取可用音色列表

### 分工

| 模块         | 负责人       | 主要任务                                   |
|--------------|--------------|------------------------------------------|
| 前端开发     | Alice        | 实现用户界面、角色管理、聊天功能         |
| 后端开发     | Bob          | 实现 API 接口、用户认证、角色与聊天管理  |
| 数据库设计   | Charlie      | 设计表结构，优化查询性能                 |
| 第三方集成   | Diana        | 集成七牛云 API，处理 ASR/TTS 请求        |

---

## 项目重难点

### 1. **语音识别 (ASR)**
- **挑战**: 处理不同音频格式，确保高准确率。
- **解决方案**: 使用七牛云的 ASR 服务，支持多种音频格式。

### 2. **自然语言处理 (LLM)**
- **挑战**: 构造上下文一致的对话，避免生成无关内容。
- **解决方案**: 使用角色的系统提示词 (System Prompt) 和历史记录构造上下文。

### 3. **语音合成 (TTS)**
- **挑战**: 确保生成的语音自然流畅，支持多种音色。
- **解决方案**: 使用七牛云的 TTS 服务，支持自定义音色。

### 4. **用户体验优化**
- **挑战**: 确保界面响应迅速，语音交互流畅。
- **解决方案**: 前端使用 React 的状态管理和异步请求优化。

### 5. **安全性**
- **挑战**: 防止用户数据泄露，确保 API 安全。
- **解决方案**: 使用 JWT 进行用户认证，所有敏感数据加密存储。

---

## 未来计划
- 支持更多语言的语音识别与合成。
- 增加角色的个性化配置选项。
- 优化聊天记录的存储与查询性能。

---

感谢您对 Vox 项目的关注！